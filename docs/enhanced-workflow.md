# Enhanced AI Expert Workflow

The AI Expert Workflow has been enhanced with a structured conversation flow that guides users through a comprehensive product development process. This document explains the enhanced workflow structure and how to use it effectively.

## The Three Spheres Method

The AI Expert Workflow implements the "Méthode des Trois Sphères" (Three Spheres Method), a methodical approach that transforms ideas into functional products through three distinct phases:

1. **Sphere 1: Product Definition & Architectural Foundation**
   - Establishes the solid foundation for the entire project
   - Defines the product vision, user personas, business requirements, and key features
   - Creates the initial PRD document

2. **Sphere 2: UX Design & Feature Expansion**
   - Uses the Product Manager's document as input
   - Develops the user experience and expands on each feature
   - Adds UI documentation, user journeys, and interaction patterns to the PRD

3. **Sphere 3: Technical Planning & Implementation Specifications**
   - Uses both the Product Manager's and UX Designer's documents as input
   - Transforms the vision into a concrete technical plan
   - Adds technical architecture, API specifications, and implementation tasks to the PRD

### Progressive Development Process

Each expert in the workflow has access to the documents generated by previous experts:

- The UX Designer receives the Product Manager's document as context
- The Software Architect receives both the Product Manager's and UX Designer's documents as context

This ensures a progressive development process where each phase builds upon the previous one, creating a comprehensive specification that covers all aspects of the product development cycle.

## Conversation Flow and Document Generation

The system is designed to engage in conversation with the user until either:

1. **User Explicitly Requests Document Generation**
   - The system checks for phrases like "generate document", "create PRD", etc.
   - If the user requests document generation, the system checks if all required topics have been covered
   - If topics are missing, it informs the user and continues the conversation
   - Only when all topics are covered will it generate the document

2. **AI Determines Enough Information Has Been Gathered**
   - Each expert prompt explicitly instructs to "Don't move to the next topic until the current one is sufficiently defined"
   - The system tracks topic completion throughout the conversation
   - When all topics for a stage are completed, the AI will suggest generating a document
   - The AI will ask for explicit confirmation before generating any document

3. **Verification Before Moving On**
   - All three expert prompts include instructions to verify with the user before concluding
   - The Product Manager prompt: "Before concluding, verify with the user if all requirements are accurately captured. When the user is satisfied, ask if they would like to generate the final PRD document..."
   - The UX Designer prompt: "Before concluding, verify all UX decisions with the user and ensure alignment with the product vision. When the user is satisfied, ask if they would like to generate the final UX Design Document..."
   - The Software Architect prompt: "Before concluding, verify the technical approach with the user and ensure it meets all requirements from previous stages. When the user is satisfied, ask if they would like to generate the final Software Specification document."

4. **Document Storage and Continuous Improvement**
   - Each expert's document is saved in the root directory (e.g., `PRD.md`, `UX_Design_Document.md`)
   - The `scripts/prd.txt` file is continuously updated throughout all phases:
     - First, it contains the Product Manager's document
     - Then, the UX Designer's content is added with appropriate section headers
     - Finally, the Software Architect's content is added to complete the specification
   - This ensures that by the end of the workflow, `scripts/prd.txt` contains a comprehensive specification with input from all three experts
   - Individual expert contributions are also saved separately as reference files

   **Important**: The `scripts/prd.txt` file is continuously improved throughout the workflow, making it ready for Task Master at any point, but it's most valuable after all three expert phases are complete.

## Workflow Structure

The workflow is divided into three distinct stages, each handled by a specialized AI expert:

1. **Product Definition** (AI Product Manager)
2. **UX Design** (AI UX Designer)
3. **Technical Architecture** (AI Software Architect)

Each stage has a set of required topics that must be covered before moving to the next stage. This ensures a comprehensive and thorough approach to product development.

## Stage 1: Product Definition

The Product Manager guides you through defining your product vision and requirements.

### Required Topics:
- **Product Vision**: Overall concept and goals of the product
- **User Personas**: Detailed profiles of target users
- **Business Requirements**: Core requirements and constraints
- **Feature Map**: Key features with priorities
- **Success Criteria**: Metrics and KPIs for measuring success

### Output:
A comprehensive Product Requirements Document (PRD) with:
- Product Overview
- Problem Statement
- User Personas
- User Stories/Jobs to be Done
- Feature Requirements (with priority levels)
- MVP Summary
- Success Metrics
- Timeline and Milestones
- Business Model
- Lean Startup Validation Plan
- Competitive Analysis
- Open Questions and Risks

## Stage 2: UX Design

The UX Designer helps you create a user experience plan based on the PRD.

### Required Topics:
- **UI Documentation**: Visual design and UI components
- **Feature Specifications**: Detailed feature descriptions
- **User Journeys**: User flows and paths
- **Interaction Patterns**: How users interact with features
- **Data Requirements**: Information architecture and data needs

### Output:
A detailed UX Design Document with:
- User Personas (refined from PRD)
- User Journey Maps
- Information Architecture
- Wireframe Descriptions
- Interaction Patterns
- UI Components and Patterns
- Accessibility Considerations
- Responsive Design Strategy
- Prototype Description
- User Testing Plan

## Stage 3: Technical Architecture

The Software Architect helps you define the technical implementation plan.

### Required Topics:
- **Technical Architecture**: Overall system architecture
- **API Specifications**: API design and endpoints
- **Implementation Tasks**: Development tasks breakdown
- **Database Schema**: Data model and relationships
- **Testing Strategy**: Quality assurance approach

### Output:
A comprehensive Software Specification with:
- System Architecture Overview
- Technology Stack
- Data Models and Relationships
- API Specifications
- Component Breakdown
- Functional Specifications
- Technical Design
- Security Considerations
- Scalability Approach
- Integration Requirements
- Monitoring and Logging
- Disaster Recovery and Resilience
- Development Guidelines
- Open Issues and Risks

## Topic Tracking and Stage Transitions

The workflow automatically tracks which topics have been covered in each stage. When all required topics for a stage are completed, you can move to the next stage with commands like:

- "Let's move to the next stage"
- "Continue to the next phase"
- "I'm ready to move on"

If you try to move to the next stage before completing all required topics, the system will remind you which topics still need to be covered.

## Document Generation

At any point, you can generate a document for the current stage with commands like:

- "Generate the document"
- "Create the PRD"
- "Generate the specification"

The system will check if all required topics have been covered before generating the document. If not, it will remind you which topics still need to be addressed.

## Using the Enhanced Workflow

### Option 1: Complete Workflow
Start with the `expertWorkflow` tool to go through all three stages sequentially:

```
Can you start the AI Expert Workflow for my recipe app idea?
```

This will guide you through all three stages, tracking your progress and ensuring comprehensive coverage of all topics.

### Option 2: Single Expert Consultation
Use the `consultExpert` tool to work with a specific expert:

```
consultExpert productManager "I want to build a recipe app that helps users find recipes based on ingredients they have at home"
```

This will focus on a single stage but still provide the structured topic-based approach.

### Option 3: Direct Document Generation
Use the `generateDocument` tool to create a document directly:

```
generateDocument productManager "Detailed project information" true
```

This bypasses the conversation flow but still produces a comprehensive document.

## Comprehensive Document

After completing all three stages, the system can generate a comprehensive document that combines the outputs from all stages. This provides a complete project specification that can be used for development planning or shared with stakeholders.

## Task Master Integration

The enhanced workflow maintains compatibility with Task Master. After generating a PRD, you can use Task Master to convert it into actionable development tasks:

```
Can you parse the PRD at scripts/prd.txt and generate tasks?
```

This integration is optional - you can use the AI Expert Workflow on its own for product planning and documentation.
